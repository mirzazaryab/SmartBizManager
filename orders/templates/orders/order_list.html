{% extends 'base.html' %}
{% load static %}

{% block title %}All Orders - SmartBizManager{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="card shadow-sm">
    <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
      <h4 class="mb-0">
        <i class="bi bi-cart-fill me-2"></i>Order List
      </h4>
      <a href="{% url 'orders:order_add' %}" class="btn btn-light">
        <i class="bi bi-plus-circle-fill me-1"></i>Add New
      </a>
    </div>
    <div class="card-body">
      <div class="table-responsive py-3">
        <table class="table table-hover table-bordered align-middle">
          <thead class="table-dark">
            <tr>
              <th scope="col" style="width: 5%;">#</th>
              <th scope="col">Order ID</th>
              <th scope="col">Customer</th>
              <th scope="col">Product</th>
              <th scope="col">Date</th>
              <th scope="col">Status</th>
              <th scope="col">Total</th>
              <th scope="col" style="width: 20%;">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for order in orders %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ order.id }}</td>
              <td>{{ order.customer.name|default:"N/A" }}</td>
              <td>{{ order.product_name|default:"N/A" }}</td>
              <td>{{ order.created_at|date:"d-m-Y"|default:"N/A" }}</td>
              <td>
                <span class="badge {% if order.status == 'pending' %}bg-warning{% elif order.status == 'shipped' %}bg-info{% elif order.status == 'delivered' %}bg-success{% else %}bg-danger{% endif %}">
                  {{ order.status|title|default:"N/A" }}
                </span>
              </td>
              <td>Rs: {{ order.total_price|floatformat:2|default:"0.00" }}</td>
              <td>
                <a href="{% url 'orders:order_detail' order.pk %}" class="btn btn-sm btn-info me-1">View</a>
                <a href="{% url 'orders:order_edit' order.pk %}" class="btn btn-sm btn-warning me-1">Edit</a>
                <a href="{% url 'orders:order_delete' order.pk %}" class="btn btn-sm btn-danger">Delete</a>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="8" class="text-center text-muted py-4">No orders found.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}